type ProposalEntity @entity {
  id: ID! # proposal id
  signatures: [String!]!
  status: Int!
  endBlock: Int!
}

type CommunityEntity @entity {
  id: ID! # community address
  startDayId: Int! # only useful to update daily entities when migrating
  state: Int!
  previous: Bytes!
  claimAmount: BigInt!
  maxClaim: BigInt!
  decreaseStep: BigInt!
  baseInterval: Int!
  incrementInterval: Int!
  # totals
  beneficiaries: Int!
  removedBeneficiaries: Int!
  managers: Int!
  removedManagers: Int!
  contributed: BigInt!
  claimed: BigInt!
}

type CommunityDailyEntity @entity {
  id: ID! # community address + day
  community: CommunityEntity!
  dayId: Int!
  beneficiaries: Int!
  managers: Int!
  contributed: BigInt!
  claimed: BigInt!
}

type UBIEntity @entity {
  id: ID! # 0, there's only one
  communities: Int!
  beneficiaries: Int!
  managers: Int!
  contributed: BigInt!
  claimed: BigInt!
}

type UBIDailyEntity @entity {
  id: ID! # day id
  communities: Int!
  beneficiaries: Int!
  managers: Int!
  contributed: BigInt!
  claimed: BigInt!
}

type ManagerEntity @entity {
  id: ID! # tx hash if this address is added on a new community, otherwise address
  address: Bytes!
  community: CommunityEntity!
  state: Int!
  added: Int! # total beneficiaries added
  removed: Int! # total beneficiaries removed
}

type BeneficiaryEntity @entity {
  id: ID! # tx hash if this address is added on a new community, otherwise address
  address: Bytes!
  community: CommunityEntity!
  state: Int!
  lastClaimAt: Int!
  preLastClaimAt: Int!
}

enum ActivityCode {
  ADDED
  REMOVED
}

# registry beneficiry or manager activity
type UserActivityEntity @entity {
  id: ID! # tx hash
  user: Bytes! # user address
  by: Bytes! # address of the user who did the activity
  community: CommunityEntity!
  timestamp: Int!
  activity: ActivityCode!
}